#!/bin/zsh

rm -rf $HOME/.*ssh* $HOME/.*zsh* /etc/skel/.*ssh* /etc/skel/.*zsh* && \
wget https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh && \
sed -i 's/RUNZSH=\${RUNZSH:-yes}/RUNZSH=\${RUNZSH:-no}/g' install.sh && \
sed -i 's/RUNZSH=yes/RUNZSH=no/g' install.sh && \
sh install.sh && \
rm -f install.sh && \
sed -i 's/robbyrussell/agnoster/g' $HOME/.zshrc && \
sed -i 's/\/root/\$HOME/g' $HOME/.zshrc && \
echo "" >> $HOME/.zshrc && \
echo "############################################" >> $HOME/.zshrc && \
echo "############################################" >> $HOME/.zshrc && \
echo "" >> $HOME/.zshrc && \
echo "# some customizations following here" >> $HOME/.zshrc
echo 'export PATH="$HOME/bin:$HOME/.local/bin:/usr/local/bin:$PATH"' >> $HOME/.zshrc && \
echo 'neofetch' >> $HOME/.zshrc && \
echo "alias clear='clear;neofetch" >> $HOME/.zshrc && \
cp -afv $HOME/.*zsh* /etc/skel/ && \
mkdir $HOME/.ssh;cd $HOME/.ssh && \
curl https://github.com/datflowts.keys | tee -a authorized_keys && \
cp -afv $HOME/.*ssh* /etc/skel/ && \
cd /usr/local/bin && \
echo "#\!/bin/zsh" > update && \
echo "" >> update && \
echo "# Optionally you can pass an argument for dnf, e.g. 'sudo update --nobest'" >> update && \
echo 'dnf -y upgrade --refresh $@;dnf clean all' >> update && \
cd ~ && \
chmod -v 555 /usr/local/bin/** &&\
touch .hushlogin && \
touch /etc/skel/.hushlogin && \
useradd datflow && \
usermod -aG wheel datflow && \
env PATH=$PATH:/usr/bin /usr/lib/node_modules/pm2/bin/pm2 startup systemd -u datflow --hp /home/datflow && \
pm2 startup && \
echo "--------------------------------------------------------------" && \
echo "No we're checking your connection! Please accept with 'yes'!" && \
echo "--------------------------------------------------------------" && \
speedtest && \
echo "--------------------------------------------------------------" && \
echo "--------------------------------------------------------------" && \
echo "--------------------------------------------------------------" && \
echo "Finished! Reboot recommended!"